<!DOCTYPE html>
<html lang="en">

<head>
    <title>whosethink 博客</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://whosethink.github.io/blog/style.css">
    <link rel="stylesheet" href="https://whosethink.github.io/blog/color/blue.css">

        <link rel="stylesheet" href="https://whosethink.github.io/blog/color/background_dark.css">
    
    <link rel="stylesheet" href="https://whosethink.github.io/blog/font-hack-subset.css">

        <link rel="shortcut icon" type="image&#x2F;svg" href="/favicon.svg">
    
    </head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="https://whosethink.github.io/blog" style="text-decoration: none;">
                    <div class="logo">
                            whosethink blog
                        </div>
                </a>
            </div>
        </div>

        <nav class="menu">
            <ul class="menu__inner">
                
                <li class="active"><a href="https://whosethink.github.io/blog">Blog</a></li>
            
                <li><a href="https://whosethink.github.io/blog/tags">Tags</a></li>
            
                <li><a href="https://whosethink.github.io/blog/archive">Archive</a></li>
            
                <li><a href="https://whosethink.github.io/blog/about">About</a></li>
            
                <li><a href="https://github.com" target="_blank" rel="noopener noreferrer">Github</a></li>
            </ul>
        </nav>
    
    </header>
    

    <div class="content">
        
    <div class="post">
        
    <h1 class="post-title"><a href="https://whosethink.github.io/blog/shang-shou-piao-liang-er-qiang-da-de-zhong-duan/">上手漂亮又强大的终端</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2020-06-15
        </span>

    </div>

    
        <span class="post-tags-inline">
                :: tags:&nbsp;
                <a class="post-tag" href="https://whosethink.github.io/blog/tags/undefined/">#undefined</a></span>
    

        
        <div class="post-content">
            <h3 id="jian-jie">简介</h3>
<p>本篇将介绍如何通过组合</p>
<ul>
<li>alacritty: 终端模拟器</li>
<li>zsh: shell</li>
<li>starship: 命令提示符, 一美观的方式提供有用的信息(当前目录, Git 分支等等)</li>
<li>tmux: 窗口/会话管理</li>
</ul>
<p>来打造一款漂亮又好用的终端.</p>
<span id="continue-reading"></span><h3 id="mu-biao-xiao-guo">目标效果</h3>
<img src="https://s1.ax1x.com/2020/06/16/NFciJ1.png" alt="alacritty + zsh + starship + tmux" class="center" style="border-radius: 8px;" />
<h3 id="zhong-duan-mo-ni-qi-alacritty">终端模拟器 - alacritty</h3>
<p>alacritty 是使用 rust 编写的一款终端模拟器, 号称是如今最快的终端模拟器(作者说栏, 如果发现其他终端模拟器的速度更快, 可以提交 Bug). 虽然目前还没释出 1.0 版本, 但项目开发非常活跃.</p>
<ol>
<li>
<p>安装</p>
<p>alacritty 兼容多平台, 在Linux/macOS/BSD/Windows 都有相应的版本. Arch 官方源包含了 alacritty, <code>pacman -S alacritty</code> 直接安装即可. 非 Arch 的童鞋参考 Github 上 <a href="https://github.com/alacritty/alacritty#installation">alacritty - installtion</a>一节.</p>
</li>
<li>
<p>配置</p>
<p>alacritty 没有主动生成配置文件, 只使用默认配置运行. 要自定义相关配置选项, 只需要新建 alacritty.yml 文件, 填充相关配置项即可. alacritty.yml 文件的具体路径在不同的系统上不一样, 运行 <code>alacritty -v</code>, <code>Configuration loaded</code> 之后的就是配置文件路径了. Arch 上的路径是 <code>~/.config/alacritty/alacritty.yml</code>.</p>
<p>完整的配置文件参见 <a href="https://github.com/alacritty/alacritty/blob/master/alacritty.yml">alacritty - alacritty.yml</a>. 下面选一些常见的配置项介绍.</p>
<ul>
<li>
<p>colors</p>
<p>配置终端输出的颜色. <a href="https://github.com/eendroroy/alacritty-theme">alacritty-theme</a> 这个项目下有许多方案可以选用. 我使用的是 <a href="https://github.com/eendroroy/alacritty-theme/blob/master/themes/pencil_dark.yaml">Pencil Dark</a>, 然后对其中颜色进行栏微调.</p>
<p>光标的颜色也在这里修改.</p>
</li>
<li>
<p>background_opacity</p>
<p>调整透明度, 0 -&gt; 1 不透明度依次增大.</p>
</li>
<li>
<p>cursor</p>
<p>调整光标的样式(下划线, 竖线, 竖块).</p>
</li>
<li>
<p>shell</p>
<p>alacritty 使用的 shell 程序的路径.</p>
</li>
<li>
<p>font</p>
<p>配置使用何种字体(普通, 加粗, 斜体等可以分别指定), 字体大小, 字距, 行距.</p>
</li>
</ul>
<p>下面是我的一些配置:</p>
<pre style="background-color:#272822;">
<code><span style="color:#f92672;">colors</span><span style="color:#f8f8f2;">:
</span><span style="color:#f8f8f2;">  </span><span style="color:#f92672;">primary</span><span style="color:#f8f8f2;">:
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">background</span><span style="color:#f8f8f2;">: </span><span style="color:#e6db74;">&#39;#000000&#39;
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">foreground</span><span style="color:#f8f8f2;">: </span><span style="color:#e6db74;">&#39;#88BD39&#39;
</span><span style="color:#f8f8f2;">  </span><span style="color:#f92672;">normal</span><span style="color:#f8f8f2;">:
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">black</span><span style="color:#f8f8f2;">:   </span><span style="color:#e6db74;">&#39;#212121&#39;
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">red</span><span style="color:#f8f8f2;">:     </span><span style="color:#e6db74;">&#39;#c30771&#39;
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">green</span><span style="color:#f8f8f2;">:   </span><span style="color:#e6db74;">&#39;#10a778&#39;
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">yellow</span><span style="color:#f8f8f2;">:  </span><span style="color:#e6db74;">&#39;#a89c14&#39;
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">blue</span><span style="color:#f8f8f2;">:    </span><span style="color:#e6db74;">&#39;#008ec4&#39;
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">magenta</span><span style="color:#f8f8f2;">: </span><span style="color:#e6db74;">&#39;#8863c9&#39;
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">cyan</span><span style="color:#f8f8f2;">:    </span><span style="color:#e6db74;">&#39;#20a5ba&#39;
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">white</span><span style="color:#f8f8f2;">:   </span><span style="color:#e6db74;">&#39;#e0e0e0&#39;
</span><span style="color:#f8f8f2;">  </span><span style="color:#f92672;">bright</span><span style="color:#f8f8f2;">:
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">black</span><span style="color:#f8f8f2;">:   </span><span style="color:#e6db74;">&#39;#212121&#39;
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">red</span><span style="color:#f8f8f2;">:     </span><span style="color:#e6db74;">&#39;#fb007a&#39;
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">green</span><span style="color:#f8f8f2;">:   </span><span style="color:#e6db74;">&#39;#5fd7af&#39;
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">yellow</span><span style="color:#f8f8f2;">:  </span><span style="color:#e6db74;">&#39;#f3e430&#39;
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">blue</span><span style="color:#f8f8f2;">:    </span><span style="color:#e6db74;">&#39;#20bbfc&#39;
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">magenta</span><span style="color:#f8f8f2;">: </span><span style="color:#e6db74;">&#39;#6855de&#39;
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">cyan</span><span style="color:#f8f8f2;">:    </span><span style="color:#e6db74;">&#39;#4fb8cc&#39;
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">white</span><span style="color:#f8f8f2;">:   </span><span style="color:#e6db74;">&#39;#f1f1f1&#39;
</span><span style="color:#f8f8f2;">  </span><span style="color:#f92672;">cursor</span><span style="color:#f8f8f2;">:
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">cursor</span><span style="color:#f8f8f2;">:  </span><span style="color:#e6db74;">&#39;#F85D12&#39;

</span><span style="color:#f8f8f2;">  </span><span style="color:#f92672;">draw_bold_text_with_bright_colors</span><span style="color:#f8f8f2;">: </span><span style="color:#ae81ff;">true
</span><span style="color:#f8f8f2;">  </span><span style="color:#f92672;">background_opacity</span><span style="color:#f8f8f2;">: </span><span style="color:#ae81ff;">0.7
</span><span style="color:#f8f8f2;">  </span><span style="color:#f92672;">cursor</span><span style="color:#f8f8f2;">:
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">style</span><span style="color:#f8f8f2;">: </span><span style="color:#e6db74;">Underline
</span><span style="color:#f8f8f2;">  </span><span style="color:#f92672;">shell</span><span style="color:#f8f8f2;">:
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">program</span><span style="color:#f8f8f2;">: </span><span style="color:#e6db74;">/usr/bin/zsh
</span><span style="color:#f8f8f2;">  </span><span style="color:#f92672;">font</span><span style="color:#f8f8f2;">:
</span><span style="color:#f8f8f2;">    </span><span style="color:#f92672;">size</span><span style="color:#f8f8f2;">: </span><span style="color:#ae81ff;">8
</span></code></pre></li>
</ol>
<h3 id="shell-zsh">shell - zsh</h3>
<p>zsh 声名在外, 不多介绍, Arch 下 <code>pacman -S zsh</code> 直接安装即可, 然后 ```chsh -s `which zsh```` 切换 shell, 重新登录生效. zsh 的配置因人而异, 插件也是种类繁多, 自行探索吧. <a href="https://github.com/zdharma/zinit">zinit</a> 是 zsh 的一个插件管理器, 上面也展示一些常用插件的配置, 可供参考.</p>
<p><strong>在这里没有使用 zsh 的提示符插件(比如 p10k), 而是使用下面要介绍的 starship 来配置.</strong></p>
<p>下面是我的一些配置:</p>
<pre style="background-color:#272822;">
<code><span style="color:#66d9ef;">source </span><span style="color:#f8f8f2;">~/.zinit/bin/zinit.zsh

setopt histignorealldups sharehistory

</span><span style="color:#75715e;"># Keep 1000 lines of history within the shell and save it to ~/.zsh_history:
</span><span style="color:#f8f8f2;">HISTSIZE=1000
SAVEHIST</span><span style="color:#f92672;">=</span><span style="color:#e6db74;">1000
</span><span style="color:#f8f8f2;">HISTFILE</span><span style="color:#f92672;">=</span><span style="color:#e6db74;">~/.zsh_history

</span><span style="color:#75715e;"># Use modern completion system
</span><span style="color:#f8f8f2;">autoload</span><span style="font-style:italic;color:#fd971f;"> -Uz</span><span style="color:#f8f8f2;"> compinit
compinit

zstyle </span><span style="color:#e6db74;">&#39;:completion:*&#39;</span><span style="color:#f8f8f2;"> auto-description </span><span style="color:#e6db74;">&#39;specify: %d&#39;
</span><span style="color:#f8f8f2;">zstyle </span><span style="color:#e6db74;">&#39;:completion:*&#39;</span><span style="color:#f8f8f2;"> completer _expand _complete _correct _approximate
zstyle </span><span style="color:#e6db74;">&#39;:completion:*&#39;</span><span style="color:#f8f8f2;"> format </span><span style="color:#e6db74;">&#39;Completing %d&#39;
</span><span style="color:#f8f8f2;">zstyle </span><span style="color:#e6db74;">&#39;:completion:*&#39;</span><span style="color:#f8f8f2;"> group-name </span><span style="color:#e6db74;">&#39;&#39;
</span><span style="color:#f8f8f2;">zstyle </span><span style="color:#e6db74;">&#39;:completion:*&#39;</span><span style="color:#f8f8f2;"> menu select=2
</span><span style="color:#66d9ef;">eval </span><span style="color:#e6db74;">&quot;$(dircolors</span><span style="font-style:italic;color:#fd971f;"> -b</span><span style="color:#e6db74;">)&quot;
</span><span style="color:#f8f8f2;">zstyle </span><span style="color:#e6db74;">&#39;:completion:*:default&#39;</span><span style="color:#f8f8f2;"> list-colors ${(s.</span><span style="color:#f92672;">:</span><span style="color:#f8f8f2;">.)LS_COLORS}
zstyle </span><span style="color:#e6db74;">&#39;:completion:*&#39;</span><span style="color:#f8f8f2;"> list-colors </span><span style="color:#e6db74;">&#39;&#39;
</span><span style="color:#f8f8f2;">zstyle </span><span style="color:#e6db74;">&#39;:completion:*&#39;</span><span style="color:#f8f8f2;"> list-prompt %SAt %p: Hit TAB for more, or the character to insert%s
zstyle </span><span style="color:#e6db74;">&#39;:completion:*&#39;</span><span style="color:#f8f8f2;"> matcher-list </span><span style="color:#e6db74;">&#39;&#39; &#39;m:{a-z}={A-Z}&#39; &#39;m:{a-zA-Z}={A-Za-z}&#39; &#39;r:|[._-]=* r:|=* l:|=*&#39;
</span><span style="color:#f8f8f2;">zstyle </span><span style="color:#e6db74;">&#39;:completion:*&#39;</span><span style="color:#f8f8f2;"> menu select=long
zstyle </span><span style="color:#e6db74;">&#39;:completion:*&#39;</span><span style="color:#f8f8f2;"> select-prompt %SScrolling active: current selection at %p%s
zstyle </span><span style="color:#e6db74;">&#39;:completion:*&#39;</span><span style="color:#f8f8f2;"> use-compctl false
zstyle </span><span style="color:#e6db74;">&#39;:completion:*&#39;</span><span style="color:#f8f8f2;"> verbose true

zstyle </span><span style="color:#e6db74;">&#39;:completion:*:*:kill:*:processes&#39;</span><span style="color:#f8f8f2;"> list-colors </span><span style="color:#e6db74;">&#39;=(#b) #([0-9]#)*=0=01;31&#39;
</span><span style="color:#f8f8f2;">zstyle </span><span style="color:#e6db74;">&#39;:completion:*:kill:*&#39;</span><span style="color:#f8f8f2;"> command </span><span style="color:#e6db74;">&#39;ps -u $USER -o pid,%cpu,tty,cputime,cmd&#39;

</span><span style="color:#f8f8f2;">zinit light zsh-users/zsh-autosuggestions
zinit light zdharma/fast-syntax-highlighting
zinit ice pick</span><span style="color:#e6db74;">&quot;async.zsh&quot;</span><span style="color:#f8f8f2;"> src</span><span style="color:#e6db74;">&quot;pure.zsh&quot;
</span><span style="color:#f8f8f2;">zinit light sindresorhus/pure
zinit light skywind3000/z.lua

</span><span style="color:#75715e;"># 启用 starship
</span><span style="color:#f8f8f2;">eval </span><span style="color:#e6db74;">&quot;$(starship init zsh)&quot;
</span></code></pre><h3 id="ti-shi-fu-you-hua-starship">提示符优化 - starship</h3>
<p>项目地址 <a href="https://github.com/starship/starship">starship</a>, 使用 rust 开发. 安装, 配置, 使用都相当方便, 使用体验优秀.</p>
<ol>
<li>
<p>安装</p>
<p>参考 <a href="https://github.com/starship/starship#getting-started">Get Started - Install the starship binary 一节</a>. 安装好后, 记得在 shell 配置文件中启用 starship. </p>
</li>
<li>
<p>配置</p>
<p><a href="https://starship.rs/config/">完整的配置项</a>, 配置文件路径是 <code>~/.config/starship.toml</code>. 采用默认的配置, 使用体验也很不错, 官网的配置描述写的很具体, 按需调整即可. 下面介绍一些常用的配置项:</p>
<ol>
<li>[character]</li>
</ol>
<p>symbol: 命令输入前的提示符(bash 里通常是 ~/#)</p>
<p>error_symbol: 上一条命令执行失败后的提示符</p>
<ol start="2">
<li>[cmd_duration]</li>
</ol>
<p>min_time: 命令的执行时间超过 min_time 后, 会显示命令的执行时间.</p>
<p>下面是我的配置:</p>
<pre style="background-color:#272822;">
<code><span style="color:#f92672;">add_newline </span><span style="color:#f8f8f2;">= </span><span style="color:#ae81ff;">false

</span><span style="color:#f8f8f2;">[character]
</span><span style="color:#f92672;">symbol </span><span style="color:#f8f8f2;">= </span><span style="color:#e6db74;">&quot;=&gt;&quot;

</span><span style="color:#f8f8f2;">[directory]
</span><span style="color:#f92672;">truncation_length </span><span style="color:#f8f8f2;">= </span><span style="color:#ae81ff;">5

</span><span style="color:#f8f8f2;">[git_status]
</span><span style="color:#f92672;">staged_count</span><span style="color:#f8f8f2;">.</span><span style="color:#f92672;">enabled </span><span style="color:#f8f8f2;">= </span><span style="color:#ae81ff;">true
</span><span style="color:#f92672;">staged_count</span><span style="color:#f8f8f2;">.</span><span style="color:#f92672;">style </span><span style="color:#f8f8f2;">= </span><span style="color:#e6db74;">&quot;yellow&quot;

</span><span style="color:#f8f8f2;">[line_break]
</span><span style="color:#f92672;">disable </span><span style="color:#f8f8f2;">= </span><span style="color:#ae81ff;">true
</span></code></pre></li>
</ol>
<h3 id="chuang-kou-guan-li-tmux">窗口管理 - tmux</h3>
<p>tmux 可以管理会话, 管理窗口, 也可以实现窗格管理(划分窗格), 具体用法可参考 <a href="https://www.ruanyifeng.com/blog/2019/10/tmux.html">Tmux 使用教程</a> 和 <a href="https://github.com/tmux/tmux/wiki/Getting-Started">Getting Started</a></p>
<p>Arch 下 <code>pacman -S tmux</code> 安装即可.</p>
<p>常见用法:</p>
<ol>
<li>
<p>横向划分窗格</p>
<p>先按 ctrl + b, 然后 &quot;</p>
</li>
<li>
<p>纵向划分窗格</p>
<p>先按 ctrl + b, 然后 %</p>
</li>
<li>
<p>关闭当前窗格</p>
<p>ctrl + b, 然后 x; 或者 ctrl + d</p>
</li>
<li>
<p>调整窗格大小</p>
<p>ctrl + b, 如果 ctrl + 方向键</p>
</li>
<li>
<p>窗格选择</p>
<p>ctrl + b, 如果 方向键</p>
</li>
<li>
<p>分离会话</p>
<p>tmux detach</p>
</li>
<li>
<p>列出会话</p>
<p>tmux ls</p>
</li>
<li>
<p>接入会话</p>
<p>tmux attach -t 数字</p>
</li>
</ol>

        </div>

        
        <div class="pagination">
            <div class="pagination__title">
                <span class="pagination__title-h">Thanks for reading! Read other posts?</span>
                <hr />
            </div>
            <div class="pagination__buttons">
                
                    <span class="button next">
                        <a href="https://whosethink.github.io/blog/arch-install-02/">
                            <span class="button__text">Arch&#x2F;Linux 安装 (2)</span>&nbsp;
                            <span class="button__icon">→</span>
                        </a>
                    </span>
                </div>
        </div>
    
    </div>

    </div>

    
    <footer class="footer">
        <div class="footer__inner">
                <div class="copyright">
                        <span>© 
    2020
 whosethink</span>
                    <span class="copyright-theme">
                        <span class="copyright-theme-sep">:: </span>
                        Theme: <a href="https://github.com/pawroman/zola-theme-terminimal/">Terminimal</a> by pawroman
                    </span>
                </div>
            </div>
    </footer>
    

</div>
</body>

</html>
